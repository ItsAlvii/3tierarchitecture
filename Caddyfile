deadman.razesteer.com {
    # Serve frontend via CloudFront (S3)
    reverse_proxy /* {
        to <CLOUDFRONT_DOMAIN>
        # Optional: preserve Host header for CloudFront
        header_up Host {host}
    }

    # Reverse proxy /api requests to backend
    handle_path /api* {
        reverse_proxy backend:3000
        log {
            output file /var/log/caddy/backend.log
            format json
        }
    }

    # Optional: access logs for frontend requests
    log {
        output file /var/log/caddy/frontend.log
        format json
    }
}

