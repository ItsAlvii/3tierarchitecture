deadman.razesteer.com {

    # Backend API first
    handle_path /api* {
        reverse_proxy backend:3000
        log {
            output file /var/log/caddy/backend.log
            format json
        }
    }

    # Everything else goes to CloudFront (frontend)
    handle {
        reverse_proxy d1711w3paqtqug.cloudfront.net {
            header_up Host {host}
        }
        log {
            output file /var/log/caddy/frontend.log
            format json
        }
    }
}

